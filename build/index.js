!function(){"use strict";var e=window.wp.element,t=window.wp.blockEditor,l=window.wp.components;wp.blocks.registerBlockType("ourplugin/featured-mppl-list",{title:"Featured MPPL List",description:"Include a list from our lists and suggestions system",icon:"welcome-learn-more",category:"common",attributes:{listId:{type:"string"},adultListsLoaded:{type:"string"},adultLists:{type:"array"},teenListsLoaded:{type:"string"},teenLists:{type:"array"},youthListsLoaded:{type:"string"},youthLists:{type:"array"},backgroundColor:{type:"string",default:"#FFFFFF"},columns:{type:"number",default:4},displayCount:{type:"number",default:0},showTitle:{type:"boolean",default:!0}},edit:function(n){function s(e){let t=async function(e){const t=await fetch(`https://mppl.org/list_system/api.php/${e}`);if(!t.ok){const e=`An error has occurred: ${t.status}`;throw new Error(e)}return await t.json()}(e);return t}function a(e,t){return wp.element.createElement("option",{value:e+"/"+t.list_name},t.list_name+" - "+t.category)}null==n.attributes.adultLists&&s("adultlists").then((e=>{n.setAttributes({adultLists:e}),n.setAttributes({adultListsLoaded:"loaded"})})),null==n.attributes.teenLists&&s("teenlists").then((e=>{n.setAttributes({teenLists:e}),n.setAttributes({teenListsLoaded:"loaded"})})),null==n.attributes.youthLists&&s("youthlists").then((e=>{n.setAttributes({youthLists:e}),n.setAttributes({youthListsLoaded:"loaded"})}));let i=function(e){for(var t="",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=l.length,s=0;s<5;s++)t+=l.charAt(Math.floor(Math.random()*n));return t}(),o=n.attributes.showTitle;return"loaded"==n.attributes.adultListsLoaded&&"loaded"==n.attributes.teenListsLoaded&&"loaded"==n.attributes.youthListsLoaded?(0,e.createElement)("div",{className:"featured-mppl-list-wrapper",style:{backgroundColor:n.attributes.backgroundColor}},(0,e.createElement)(t.InspectorControls,null,(0,e.createElement)(l.PanelBody,{title:"Item Display Count",initialOpen:!1},(0,e.createElement)(l.PanelRow,null,(0,e.createElement)(l.RangeControl,{label:"limit the number of list items shown. 0 is for all",value:n.attributes.displayCount,onChange:e=>n.setAttributes({displayCount:e}),min:0,max:30}))),(0,e.createElement)(l.PanelBody,{title:"Columns",initialOpen:!0},(0,e.createElement)(l.PanelRow,null,(0,e.createElement)(l.RangeControl,{label:"Choose number of columns",value:n.attributes.columns,onChange:e=>n.setAttributes({columns:e}),min:1,max:4}))),(0,e.createElement)(l.PanelBody,{title:"Background Color",initialOpen:!1},(0,e.createElement)(l.PanelRow,null,(0,e.createElement)(l.ColorPicker,{color:n.attributes.backgroundColor,onChangeComplete:e=>n.setAttributes({backgroundColor:e.hex})}))),(0,e.createElement)(l.PanelBody,{title:"Show Title",initialOpen:!1},(0,e.createElement)(l.PanelRow,null,(0,e.createElement)(l.ToggleControl,{label:"Should Title be shown?",help:o?"Yes":"No",checked:o,onChange:e=>{console.log(e),n.setAttributes({showTitle:e})}})))),(0,e.createElement)("div",{onChange:e=>function(e,t){let l=document.querySelectorAll("."+t);for(let t=0;t<l.length;t++)l[t].classList.add("hidden"),l[t].classList.contains(e.target.id)&&l[t].classList.remove("hidden");console.log(l),console.log(t),console.log(e)}(e,i)},(0,e.createElement)("input",{type:"radio",id:"adult_list",name:i,value:"adult_list"}),(0,e.createElement)("label",{for:"adult_list"},"Adult List"),(0,e.createElement)("br",null),(0,e.createElement)("input",{type:"radio",id:"teen_list",name:i,value:"teen_list"}),(0,e.createElement)("label",{for:"teen_list"},"Teen List"),(0,e.createElement)("br",null),(0,e.createElement)("input",{type:"radio",id:"youth_list",name:i,value:"youth_list"}),(0,e.createElement)("label",{for:"youth_list"},"Youth List"),(0,e.createElement)("br",null)),(0,e.createElement)("div",{className:`${i} adult_list list-select-container hidden`},(0,e.createElement)("select",{onChange:e=>{n.setAttributes({listId:e.target.value})}},(0,e.createElement)("option",{disable:"true",selected:"true",value:"none"},"Choose an Adult list"),n.attributes.adultLists.map((function(e){return a("adultlists",e)})))),(0,e.createElement)("div",{className:`${i} teen_list list-select-container hidden`},(0,e.createElement)("select",{onChange:e=>{n.setAttributes({listId:e.target.value})}},(0,e.createElement)("option",{disable:"true",selected:"true",value:"none"},"Choose an Teen list"),n.attributes.teenLists.map((function(e){return a("teenlists",e)})))),(0,e.createElement)("div",{className:`${i} youth_list list-select-container hidden`},(0,e.createElement)("select",{onChange:e=>{n.setAttributes({listId:e.target.value})}},(0,e.createElement)("option",{disable:"true",selected:"true",value:"none"},"Choose an Youth list"),n.attributes.youthLists.map((function(e){return a("youthlists",e)})))),(0,e.createElement)("h2",{className:"list-name-in-editor"},"Display the list: ",(0,e.createElement)("strong",null,n.attributes.listId))):(0,e.createElement)("p",null,"Loading ...")},save:function(){return null}})}();